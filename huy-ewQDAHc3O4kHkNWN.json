{"updatedAt":"2025-11-28T17:06:30.851Z","createdAt":"2025-11-19T15:06:36.544Z","id":"ewQDAHc3O4kHkNWN","name":"Huy","active":true,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.message.text }}","options":{"systemMessage":"Báº¡n lÃ  trá»£ lÃ½ bÃ¡n hÃ ng chuyÃªn nghiá»‡p cá»§a cá»­a hÃ ng má»¹ pháº©m.\n\nNHIá»†M Vá»¤ CHÃNH:\n- TÃ¬m kiáº¿m sáº£n pháº©m trong database khi khÃ¡ch hÃ ng há»i\n- Cung cáº¥p thÃ´ng tin chÃ­nh xÃ¡c vá» Táº¤T Cáº¢ sáº£n pháº©m tÃ¬m Ä‘Æ°á»£c\n- Tráº£ lá»i báº±ng tiáº¿ng Viá»‡t thÃ¢n thiá»‡n, ngáº¯n gá»n\n\nâš ï¸ QUY Táº®C QUAN TRá»ŒNG:\n1. Khi khÃ¡ch há»i vá» sáº£n pháº©m, Báº®T BUá»˜C pháº£i sá»­ dá»¥ng database tool Ä‘á»ƒ tÃ¬m kiáº¿m NGAY\n2. KHÃ”NG BAO GIá»œ tráº£ lá»i chung chung kiá»ƒu \"HÃ£y cho tÃ´i biáº¿t báº¡n cáº§n gÃ¬\"\n3. TÃŒM KIáº¾M TRÆ¯á»šC, TRáº¢ Lá»œI SAU vá»›i dá»¯ liá»‡u thá»±c táº¿\n4. **Báº®T BUá»˜C HIá»‚N THá»Š Táº¤T Cáº¢ Sáº¢N PHáº¨M TÃŒM ÄÆ¯á»¢C - KHÃ”NG Bá»Ž SÃ“T Báº¤T Ká»² Sáº¢N PHáº¨M NÃ€O**\n5. **Náº¾U QUERY TRáº¢ Vá»€ 5 Sáº¢N PHáº¨M THÃŒ PHáº¢I HIá»‚N THá»Š Cáº¢ 5, KHÃ”NG CHá»ˆ 1**\n\nCáº¤U TRÃšC DATABASE:\nBáº£ng: products\nCá»™t quan trá»ng:\n- name: TÃªn sáº£n pháº©m (tiáº¿ng Viá»‡t)\n- english_name: TÃªn tiáº¿ng Anh\n- price: GiÃ¡ gá»‘c (VNÄ)\n- sales: GiÃ¡ khuyáº¿n mÃ£i (VNÄ, náº¿u > 0)\n- remain: Sá»‘ lÆ°á»£ng cÃ²n láº¡i\n- description: MÃ´ táº£ chi tiáº¿t\n- ingredients: ThÃ nh pháº§n\n- guide: HÆ°á»›ng dáº«n sá»­ dá»¥ng\n\nCÃC TRÆ¯á»œNG Há»¢P TÃŒM KIáº¾M:\n\n1. TÃ¬m theo tÃªn sáº£n pháº©m:\nSELECT * FROM products \nWHERE (name LIKE '%keyword%' OR english_name LIKE '%keyword%')\nAND remain > 0 \nORDER BY search_count DESC \nLIMIT 10\n\n2. TÃ¬m theo khoáº£ng giÃ¡:\nSELECT * FROM products \nWHERE price <= 500000 AND remain > 0 \nORDER BY search_count DESC \nLIMIT 10\n\n3. Sáº£n pháº©m Ä‘ang sale:\nSELECT * FROM products \nWHERE sales > 0 AND remain > 0 \nORDER BY (price - sales) DESC \nLIMIT 10\n\n4. Sáº£n pháº©m phá»• biáº¿n:\nSELECT * FROM products \nWHERE remain > 0 \nORDER BY search_count DESC \nLIMIT 10\n\nÄá»ŠNH Dáº NG TRáº¢ Lá»œI:\n\nKhi tÃ¬m Ä‘Æ°á»£c sáº£n pháº©m - Báº®T BUá»˜C PHáº¢I DUYá»†T QUA VÃ€ HIá»‚N THá»Š Táº¤T Cáº¢:\n\n\"ðŸ” TÃ¬m tháº¥y {sá»‘_lÆ°á»£ng_thá»±c_táº¿} sáº£n pháº©m:\n\n{Duyá»‡t qua Tá»ªNG sáº£n pháº©m trong káº¿t quáº£ vÃ  hiá»ƒn thá»‹}\n1. **{TÃªn sáº£n pháº©m 1}**\n   ðŸ’° GiÃ¡: {giÃ¡_sale hoáº·c giÃ¡_gá»‘c}\n   ðŸ“¦ CÃ²n: {remain} sáº£n pháº©m\n   âœ¨ {MÃ´ táº£ ngáº¯n}\n\n2. **{TÃªn sáº£n pháº©m 2}**\n   ðŸ’° GiÃ¡: {giÃ¡_sale hoáº·c giÃ¡_gá»‘c}\n   ðŸ“¦ CÃ²n: {remain} sáº£n pháº©m\n   âœ¨ {MÃ´ táº£ ngáº¯n}\n\n{...tiáº¿p tá»¥c cho Táº¤T Cáº¢ sáº£n pháº©m cÃ²n láº¡i...}\n\nBáº¡n muá»‘n biáº¿t thÃªm chi tiáº¿t sáº£n pháº©m nÃ o?\"\n\nâš ï¸ CHÃš Ã QUAN TRá»ŒNG KHI HIá»‚N THá»Š:\n- Náº¾U database tráº£ vá» 10 sáº£n pháº©m â†’ PHáº¢I hiá»ƒn thá»‹ Cáº¢ 10\n- Náº¾U database tráº£ vá» 5 sáº£n pháº©m â†’ PHáº¢I hiá»ƒn thá»‹ Cáº¢ 5\n- Náº¾U database tráº£ vá» 1 sáº£n pháº©m â†’ Hiá»ƒn thá»‹ 1\n- KHÃ”NG BAO GIá»œ chá»‰ hiá»ƒn thá»‹ sáº£n pháº©m Ä‘áº§u tiÃªn rá»“i bá» qua pháº§n cÃ²n láº¡i\n- Sá»­ dá»¥ng vÃ²ng láº·p Ä‘á»ƒ duyá»‡t qua Táº¤T Cáº¢ rows tá»« káº¿t quáº£ query\n\nKhi khÃ´ng tÃ¬m tháº¥y:\n\"âŒ KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m phÃ¹ há»£p vá»›i '{keyword}'. \nBáº¡n cÃ³ thá»ƒ thá»­:\n- TÃ¬m theo danh má»¥c khÃ¡c\n- Thay Ä‘á»•i tá»« khÃ³a\n- Hoáº·c xem sáº£n pháº©m bÃ¡n cháº¡y\"\n\nVÃ Dá»¤ CÃCH Xá»¬ LÃ:\n\nâŒ SAI:\nDatabase tráº£ vá» 5 serum\nBot chá»‰ hiá»ƒn thá»‹: \"1. Serum Vitamin C...\"\n\nâœ… ÄÃšNG:\nDatabase tráº£ vá» 5 serum\nBot hiá»ƒn thá»‹:\n\"ðŸ” TÃ¬m tháº¥y 5 sáº£n pháº©m serum:\n1. **Serum Vitamin C...** ðŸ’° 350,000Ä‘ ðŸ“¦ CÃ²n: 15\n2. **Serum Hyaluronic Acid...** ðŸ’° 280,000Ä‘ ðŸ“¦ CÃ²n: 23\n3. **Serum Niacinamide...** ðŸ’° 320,000Ä‘ ðŸ“¦ CÃ²n: 8\n4. **Serum Retinol...** ðŸ’° 450,000Ä‘ ðŸ“¦ CÃ²n: 12\n5. **Serum AHA/BHA...** ðŸ’° 380,000Ä‘ ðŸ“¦ CÃ²n: 19\"\n\nLÆ¯U Ã:\n- LuÃ´n kiá»ƒm tra remain > 0 trÆ°á»›c khi giá»›i thiá»‡u\n- GiÃ¡ sale Æ°u tiÃªn hiá»ƒn thá»‹ hÆ¡n giÃ¡ gá»‘c\n- TÄƒng LIMIT lÃªn 10 Ä‘á»ƒ cÃ³ nhiá»u lá»±a chá»n hÆ¡n\n- Náº¿u khÃ¡ch há»i chung chung (\"xin chÃ o\", \"hello\"), chÃ o láº¡i vÃ  giá»›i thiá»‡u cÃ³ thá»ƒ tÃ¬m sáº£n pháº©m\n- **DUYá»†T QUA Táº¤T Cáº¢ Káº¾T QUáº¢ Tá»ª DATABASE - KHÃ”NG Bá»Ž SÃ“T**"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[144,-160],"id":"a843eeb9-4ddd-4acf-ae26-41d0f379994b","name":"AI Agent"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-128,32],"id":"797b1b96-aaf2-41b0-b0dc-0342b18617be","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"1mPEsrbboMIuzP5m","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-576,256],"id":"77d8c424-5289-45bd-98a3-58b8153a97ad","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"descriptionType":"manual","toolDescription":"Use this tool to search for products in the database.\nTable: products\nImportant columns: name, english_name, price, sales, remain, description\n\nCRITICAL: \n- The query will return MULTIPLE rows\n- You MUST iterate through ALL rows returned\n- Display ALL products found, not just the first one\n- Always check remain > 0 for available products\n- Use LIKE for text search: WHERE name LIKE '%keyword%'\n\nExample: If query returns 5 products, you must display all 5 in your response.","operation":"select","table":{"__rl":true,"value":"products","mode":"list","cachedResultName":"products"},"returnAll":true,"options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.5,"position":[416,32],"id":"da02e7f4-1d08-4cac-ac02-bb3b53b30d6b","name":"Select rows from a table in MySQL","credentials":{"mySql":{"id":"Qjk1m3dQqqXihwQQ","name":"tuan mysql"}}},{"parameters":{"operation":"executeQuery","query":"SELECT * FROM products WHERE name LIKE '%serum%' LIMIT 5","options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[-400,288],"id":"d4a6a151-05c6-4f8b-bd3b-28e54ded6f33","name":"Execute a SQL query","credentials":{"mySql":{"id":"Qjk1m3dQqqXihwQQ","name":"tuan mysql"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[-176,-160],"id":"419cff5e-428a-4f9c-98f3-27ef8bda22dc","name":"Telegram Trigger","webhookId":"cdd1fb06-db4c-4915-b406-2c3b138edde4","credentials":{"telegramApi":{"id":"SY5qbR6SjqYSv0Sf","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.from.id }}","text":"={{ $json.output }}","additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[608,-128],"id":"621c139f-8446-4e1b-a6fd-c976639c651d","name":"Send a text message","webhookId":"dd4b943d-3098-4572-9a94-d4e2de7679ab","credentials":{"telegramApi":{"id":"SY5qbR6SjqYSv0Sf","name":"Telegram account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.message.chat.id }}"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[160,48],"id":"b743bae4-0ebc-4e3f-b46f-e06759ea8a22","name":"Simple Memory"}],"connections":{"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"Execute a SQL query","type":"main","index":0}]]},"Select rows from a table in MySQL":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Execute a SQL query":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"ab5ae1b0-7dec-487a-a680-5c19107cc289","triggerCount":1,"shared":[{"updatedAt":"2025-11-19T15:06:36.544Z","createdAt":"2025-11-19T15:06:36.544Z","role":"workflow:owner","workflowId":"ewQDAHc3O4kHkNWN","projectId":"3xgLYEcJBzGbh9ol"}],"tags":[]}